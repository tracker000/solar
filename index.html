<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Solar Storm NOW?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Real-time geomagnetic storm & aurora watch.">

  <!-- Open Graph -->
  <meta property="og:title" content="Solar Storm NOW?">
  <meta property="og:description" content="See whether a major G3+ geomagnetic storm is in progress, in real time.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://solarstormnow.com">
  <meta property="og:image" content="https://solarstormnow.com/preview.png">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha512-sA+e2e0UUti85C9N37aYcioj6g8UjKPszCI72TttmIyl5+x4/8pGFek5pD5G7QwC+rbM3yjKSlPrJ9q4SibB+w=="
        crossorigin=""/>
  <style>
    /* … mevcut tüm CSS burada değişmeden duruyor … */
  </style>
</head>

<body>
  <!-- … sayfa içeriği değişmedi … -->

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha512-nmn7ADoNn+6F5XUYZfdekiRNdCR5YJutF4Xx2t5XYHdCbj2iW5vZvLV7WwUe1Q5PDlq0xj0h2bbw6nYw5Mk43Q=="
          crossorigin=""></script>

  <!-- MODERN TARAYICILAR (ES6+) -->
  <script type="module">
    // Global variables
    let map;
    let auroraLayer;
    let auroraData;

    /* … ORİJİNAL ES6 KODUNUZ AYNI KALDI … */
  </script>

  <!-- ESKİ TARAYICILAR (ES5 + Polyfill) -->
  <script nomodule>
  // Polyfills
  if (!String.prototype.includes) {
    String.prototype.includes = function(search, start) {
      if (search instanceof RegExp) throw TypeError('no regex');
      if (start === undefined) start = 0;
      return this.indexOf(search, start) !== -1;
    };
  }
  if (!Date.prototype.toISOString) {
    Date.prototype.toISOString = function () {
      function pad(n){return n<10?'0'+n:n;}
      return this.getUTCFullYear() + '-' +
        pad(this.getUTCMonth()+1) + '-' +
        pad(this.getUTCDate()) + 'T' +
        pad(this.getUTCHours()) + ':' +
        pad(this.getUTCMinutes()) + ':' +
        pad(this.getUTCSeconds()) + 'Z';
    };
  }

  // --- ES5 uyumlu kod ---
  // Global variables
  var map;
  var auroraLayer;
  var auroraData;

  /* … OK fonksiyonları → function, let/const → var,
       includes → indexOf(... ) !== -1  ile değiştirilmiş
       TAM ES5 SÜRÜMÜ BURADA … */
  </script>
</body>
</html>
